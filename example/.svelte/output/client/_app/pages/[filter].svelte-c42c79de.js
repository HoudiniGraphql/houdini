var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,i=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,s=(t,i,n)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n,r=(e,r)=>{for(var o in r||(r={}))t.call(r,o)&&s(e,o,r[o]);if(i)for(var o of i(r))n.call(r,o)&&s(e,o,r[o]);return e};import{x as o,K as c,z as a,L as l,S as d,i as u,s as h,e as m,k as f,t as p,c as b,a as y,n as I,g as k,d as w,b as g,M as v,f as _,I as S,N as D,h as R,C as T,E as L,O as E,l as O,j as A,m as $,o as j,v as x,r as C,w as M,P as F,Q as V,u as H,B as N,R as U}from"../chunks/index-d2ff60c6.js";import{f as B,g as K,R as P}from"../chunks/network-de0a377e.js";import{w as z,r as J,d as q}from"../chunks/index-ee7cf8b5.js";class Q{constructor(e){this.fields={},this.keyVersions={},this.subscribers={},this.recordLinks={},this.listLinks={},this.referenceCounts={},this.connections=[],this.cache=e}allSubscribers(){return Object.values(this.subscribers).flatMap((e=>e))}getField(e){return this.fields[e]}writeField(e,t){this.fields[e]=t}writeRecordLink(e,t){this.recordLinks[e]=t}writeListLink(e,t){this.listLinks[e]=t}linkedRecord(e){return this.cache.internal.getRecord(this.recordLinks[e])}linkedRecordID(e){return this.recordLinks[e]}linkedListIDs(e){return this.listLinks[e]||[]}linkedList(e){return(this.listLinks[e]||[]).map((e=>this.cache.internal.getRecord(e))).filter((e=>null!==e))}appendLinkedList(e,t){this.listLinks[e]||(this.listLinks[e]=[]),this.listLinks[e].push(t)}prependLinkedList(e,t){this.listLinks[e]||(this.listLinks[e]=[]),this.listLinks[e].unshift(t)}removeFromLinkedList(e,t){this.listLinks[e]=(this.listLinks[e]||[]).filter((e=>e!==t))}addSubscriber(e,t,...i){this.keyVersions[e]||(this.keyVersions[e]=new Set),this.keyVersions[e].add(t);const n=(this.subscribers[t]||[]).map((({set:e})=>e)),s=i.filter((({set:e})=>!n.includes(e)));this.subscribers[t]=this.getSubscribers(t).concat(...s),this.referenceCounts[t]||(this.referenceCounts[t]=new Map);const r=this.referenceCounts[t];for(const o of i)r.set(o.set,(r.get(o.set)||0)+1)}getSubscribers(e){return this.subscribers[e]||[]}forgetSubscribers(...e){this.forgetSubscribers_walk(e.map((({set:e})=>e)))}removeAllSubscribers(){this.forgetSubscribers(...this.allSubscribers())}addConnectionReference(e){this.connections.push(e)}removeConnectionReference(e){this.connections=this.connections.filter((t=>!(t.name===e.name&&t.parentID===e.parentID)))}removeAllSubscriptionVerions(e,t){this.keyVersions[e]&&this.removeSubscribers([...this.keyVersions[e]],[t.set])}forgetSubscribers_walk(e){var t;this.removeSubscribers(Object.keys(this.subscribers),e);const i=Object.keys(this.recordLinks).concat(Object.keys(this.listLinks).flatMap((e=>this.listLinks[e])));for(const n of i)null===(t=this.cache.internal.getRecord(n))||void 0===t||t.forgetSubscribers_walk(e)}removeSubscribers(e,t){var i;for(const n of e){let e=[];for(const s of t){if(!(null===(i=this.referenceCounts[n])||void 0===i?void 0:i.has(s)))continue;const t=this.referenceCounts[n],r=(t.get(s)||0)-1;t.set(s,r),r<=0&&(e.push(s),t.delete(s))}this.subscribers[n]=this.getSubscribers(n).filter((({set:t})=>!e.includes(t)))}}}class W{constructor({name:e,cache:t,record:i,key:n,connectionType:s,selection:r,when:o,filters:c,parentID:a}){this.record=i,this.key=n,this.connectionType=s,this.cache=t,this.selection=r,this._when=o,this.filters=c,this.name=e,this.parentID=a}when(e){return new W({cache:this.cache,record:this.record,key:this.key,connectionType:this.connectionType,selection:this.selection,when:e,filters:this.filters,parentID:this.parentID,name:this.name})}append(e,t,i={}){return this.addToConnection(e,t,i,"last")}prepend(e,t,i={}){return this.addToConnection(e,t,i,"first")}addToConnection(e,t,i={},n){if(!this.validateWhen())return;const s=this.cache.id(this.connectionType,t);this.cache.write(e,t,i,s),"first"===n?this.record.prependLinkedList(this.key,s):this.record.appendLinkedList(this.key,s);const r=this.record.getSubscribers(this.key);this.cache.internal.notifySubscribers(r,i);const o=this.cache.internal.record(s);o.addConnectionReference({parentID:this.parentID,name:this.name}),this.cache.internal.insertSubscribers(o,this.selection,i,...r)}removeID(e,t={}){if(!this.validateWhen())return;this.record.removeFromLinkedList(this.key,e);const i=this.record.getSubscribers(this.key);this.cache.internal.notifySubscribers(i,t),this.cache.internal.unsubscribeSelection(this.cache.internal.record(e),this.selection,t,...i.map((({set:e})=>e)))}remove(e,t={}){this.removeID(this.cache.id(this.connectionType,e),t)}validateWhen(){let e=!0;if(this._when){const t=this.filters;this._when.must&&t&&(e=Object.entries(this._when.must).reduce(((e,[i,n])=>Boolean(e&&t[i]==n)),e)),this._when.must_not&&(e=!t||Object.entries(this._when.must_not).reduce(((e,[i,n])=>Boolean(e&&t[i]!=n)),e))}return e}*[Symbol.iterator](){for(let e of this.record.linkedList(this.key))yield e}}const G="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_0123456789",X="_ROOT_";var Y=new class{constructor(){this._data=new Map,this._connections=new Map,this.lastKnownVariables=new Map}write(e,t,i={},n){const s=[],r=n||X;this._write(r,r,e,r,t,i,s),this.notifySubscribers(s,i)}id(e,t){return e+":"+("string"==typeof t?t:this.computeID(t))}idFields(e){return["id"]}subscribe(e,t={}){let i=e.parentID?this.record(e.parentID):this.root();if(!i)throw new Error("Could not find root of subscription");this.addSubscribers(i,e,e.selection,t)}unsubscribe(e,t={}){let i=e.parentID?this.getRecord(e.parentID):this.root();i&&(this.lastKnownVariables.has(e.set)&&this.lastKnownVariables.delete(e.set),this.removeSubscribers(i,e,e.selection,t))}connection(e,t){var i;const n=null===(i=this._connections.get(e))||void 0===i?void 0:i.get(t||X);if(!n)throw new Error(`Cannot find connection with name: ${e} under parent: ${t}. Is it possible that the query is not mounted?`);return n}delete(e,t={}){const i=this.record(e);i.removeAllSubscribers();for(const{name:n,parentID:s}of i.connections){this.connection(n,s).removeID(e,t)}return this._data.delete(e)}record(e){return this._data.has(e)||this._data.set(e,new Q(this)),this._data.get(e)}get internal(){return{notifySubscribers:this.notifySubscribers.bind(this),insertSubscribers:this.insertSubscribers.bind(this),unsubscribeSelection:this.unsubscribeSelection.bind(this),evaluateKey:this.evaluateKey.bind(this),record:this.record.bind(this),getRecord:this.getRecord.bind(this)}}computeID(e){return e.id}root(){return this.record(X)}getData(e,t,i,n){const s={};for(const[r,{type:o,keyRaw:c,fields:a}]of Object.entries(i)){const i=this.evaluateKey(c,n);if(this.isScalarLink(o)){s[r]=t.getField(i);continue}const l=t.linkedRecord(i);if(l&&a){s[r]=this.getData(e,l,a,n);continue}const d=t.linkedList(i);d&&a&&(s[r]=d.map((t=>this.getData(e,t,a,n))))}return s}addSubscribers(e,t,i,n){var s;for(const{type:o,keyRaw:c,fields:a,connection:l,filters:d}of Object.values(i)){const i=this.evaluateKey(c,n),u=this.lastKnownVariables.get(t.set);if(c.includes("$")&&JSON.stringify(n)!==JSON.stringify(u)&&e.removeAllSubscriptionVerions(c,t),e.addSubscriber(c,i,t),!this.isScalarLink(o)){const c=e.linkedRecord(i);let u=c?[c]:e.linkedList(i);if(l&&a&&(this._connections.has(l)||this._connections.set(l,new Map),null===(s=this._connections.get(l))||void 0===s||s.set(t.parentID||X,new W({name:l,parentID:t.parentID,cache:this,record:e,connectionType:o,key:i,selection:a,filters:Object.entries(d||{}).reduce(((e,[t,{kind:i,value:s}])=>r(r({},e),{[t]:"Variable"!==i?s:n[s]})),{})}))),!u||!a)continue;for(const e of u)l&&e.addConnectionReference({name:l,parentID:t.parentID}),this.addSubscribers(e,t,a,n)}}}removeSubscribers(e,t,i,n){for(const{type:s,keyRaw:r,fields:o,connection:c}of Object.values(i)){const i=this.evaluateKey(r,n);if(e.forgetSubscribers(t),c&&(this._connections.delete(c),e.removeConnectionReference({name:c,parentID:t.parentID})),!this.isScalarLink(s)){const s=e.linkedRecord(i);let r=s?[s]:e.linkedList(i);if(!r||!o)continue;for(const e of r)this.removeSubscribers(e,t,o,n)}}}_write(e,t,i,n,s,r,o){var c,a;const l=this.record(n);for(const[d,u]of Object.entries(s)){if(!i||!i[d])throw new Error("Could not find field listing in selection for "+d+" @ "+JSON.stringify(i));const{type:s,keyRaw:h,fields:m,operations:f,connection:p}=i[d],b=this.evaluateKey(h,r);if(!s)throw new Error("could not find the field information for "+d);const y=l.getSubscribers(b);if(u instanceof Object&&!Array.isArray(u)&&m){const i=l.linkedRecordID(b),a=(null===(c=this.idFields(s))||void 0===c?void 0:c.filter((e=>void 0===u[e])).length)>0?`${t}.${b}`:this.id(s,u);i!==a&&(l.writeRecordLink(b,a),i&&this.record(i).forgetSubscribers(...y),o.push(...y)),this._write(e,n,m,a,u,r,o)}else if(!this.isScalarLink(s)&&Array.isArray(u)&&m){const i=[],c=l.linkedListIDs(this.evaluateKey(b,r)),d=u.length>0&&(null===(a=this.idFields(s))||void 0===a?void 0:a.filter((e=>void 0===u.find((e=>e))[e])).length)>0;for(const[a,l]of u.entries()){if(!(l instanceof Object)||Array.isArray(l))throw new Error("Encountered link to non objects");const u=d?`${t}.${b}[${a}]`:this.id(s,l);this._write(e,n,m,u,l,r,o),i.push(u),c.includes(u)||p&&this.record(u).addConnectionReference({parentID:e,name:p})}const h=JSON.stringify(i)!==JSON.stringify(c);let f={};for(const e of y){const t=JSON.stringify(this.lastKnownVariables.get(e.set)||{})!==JSON.stringify(r);(h||t)&&o.push(e),this.lastKnownVariables.set(e.set,r)}for(const e of c.filter((e=>!i.includes(e))))for(const t of y)f[e]||(f[e]=new Set),f[e].add(t);for(const[e,t]of Object.entries(f))this.record(e).forgetSubscribers(...t);h&&l.writeListLink(b,i)}else u!==l.getField(b)&&(l.writeField(b,u),o.push(...y));for(const e of f||[]){let t;if(e.parentID)if("Variable"!==e.parentID.kind)t=e.parentID.value;else{const i=r[e.parentID.value];if("string"!=typeof i)throw new Error("parentID value must be a string");t=i}if("insert"===e.action&&u instanceof Object&&!Array.isArray(u)&&m&&e.connection)this.connection(e.connection,t).when(e.when).addToConnection(m,u,r,e.position||"last");else if("remove"===e.action&&u instanceof Object&&!Array.isArray(u)&&m&&e.connection)this.connection(e.connection,t).when(e.when).remove(u,r);else if("delete"===e.action&&e.type){if("string"!=typeof u)throw new Error("Cannot delete a record with a non-string ID");this.delete(this.id(e.type,u),r)}}}}getRecord(e){return e&&this._data.get(e)||null}isScalarLink(e){return["String","Boolean","Float","ID","Int"].includes(e)}notifySubscribers(e,t={}){for(const i of e){let e=i.parentID?this.getRecord(i.parentID):this.root();if(!e)throw new Error("Could not find root of subscription");i.set(this.getData(i,e,i.selection,t))}}insertSubscribers(e,t,i,...n){for(const{keyRaw:s,fields:r}of Object.values(t)){const t=this.evaluateKey(s,i);if(e.addSubscriber(s,t,...n),r){const s=e.linkedRecord(t),o=s?[s]:e.linkedList(t);for(const e of o)this.insertSubscribers(e,r,i,...n)}}}unsubscribeSelection(e,t,i,...n){for(const{keyRaw:s,fields:r}of Object.values(t)){const t=this.evaluateKey(s,i);if(e.removeSubscribers([t],n),r){const s=e.linkedList(t)||[e.linkedRecord(t)];for(const e of s)this.unsubscribeSelection(e,r,i,...n)}}}evaluateKey(e,t={}){let i="",n="",s=!1;for(const r of e){if(n){if(G.includes(r)){n+=r;continue}const e=t[n.slice(1)];i+=void 0!==e?JSON.stringify(e):"undefined",n=""}"$"!==r||s?('"'===r&&(s=!s),i+=r):n="$"}return i}};const Z=()=>c("variables")||(()=>({}));function ee(e){if("HoudiniQuery"!==e.kind)throw new Error("query() must be passed a query document");let t=e.variables;o("variables",(()=>t));const i=e.initialValue.data,n=z(i);let s={rootType:e.artifact.rootType,selection:e.artifact.selection,set:n.set};return a((()=>{Y.write(e.artifact.selection,i,t),s&&Y.subscribe(s,t)})),l((()=>{s=null,Y.unsubscribe({rootType:e.artifact.rootType,selection:e.artifact.selection,set:n.set},t)})),{data:{subscribe:n.subscribe},writeData(i,n){t=n||{},s&&Y.subscribe(s,t),Y.write(e.artifact.selection,i.data,t)}}}const te="undefined"==typeof window,ie=()=>{const e=c("__svelte__");return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:e.navigating.subscribe}},session:e.session}},ne={subscribe:e=>ie().page.subscribe(e)},se=e=>{throw new Error(te?`Can only ${e} session store in browser`:`Cannot ${e} session store before subscribing`)},re={subscribe(e){const t=ie().session;return te||(re.set=t.set,re.update=t.update),t.subscribe(e)},set:e=>{se("set")},update:e=>{se("update")}};function oe(e){if("HoudiniMutation"!==e.kind)throw new Error("mutation() must be passed a mutation document");const{raw:t}=e.artifact,i=re,n=Z();return s=>new Promise((async(r,o)=>{let c;try{const e={fetch:window.fetch.bind(window),session:i,context:{},page:{host:"",path:"",params:{},query:new URLSearchParams}},{data:n,errors:r}=await B(e,{text:t,variables:s},i);if(r)return void o(r);if(!n)return void o([new Error("Encountered empty data response in mutation payload")]);c=n}catch(a){return void o(a)}Y.write(e.artifact.selection,c,n()),r(c)}))}const ce="query AllItems($completed: Boolean) {\n  filteredItems: items(completed: $completed) {\n    id\n    completed\n    ...ItemEntry_item\n  }\n  allItems: items {\n    id\n    completed\n  }\n}\n\nfragment ItemEntry_item on TodoItem {\n  id\n  text\n  completed\n}\n";var ae=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:"AllItems",kind:"HoudiniQuery",hash:"89d2e5393b2bb371f44b1110fc7c0c39",raw:ce,rootType:"Query",selection:{filteredItems:{type:"TodoItem",keyRaw:"filteredItems(completed: $completed)",fields:{id:{type:"ID",keyRaw:"id"},completed:{type:"Boolean",keyRaw:"completed"},text:{type:"String",keyRaw:"text"}},connection:"Filtered_Items",filters:{completed:{kind:"Variable",value:"completed"}}},allItems:{type:"TodoItem",keyRaw:"allItems",fields:{id:{type:"ID",keyRaw:"id"},completed:{type:"Boolean",keyRaw:"completed"}},connection:"All_Items"}}});var le=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:"AddItem",kind:"HoudiniMutation",hash:"02e47d392ba612a24af66597d1c019cf",raw:"mutation AddItem($input: AddItemInput!) {\n  addItem(input: $input) {\n    item {\n      ...Filtered_Items_insert\n      ...All_Items_insert\n    }\n  }\n}\n\nfragment Filtered_Items_insert on TodoItem {\n  id\n  completed\n  ...ItemEntry_item\n}\n\nfragment All_Items_insert on TodoItem {\n  id\n  completed\n}\n\nfragment ItemEntry_item on TodoItem {\n  id\n  text\n  completed\n}\n",rootType:"Mutation",selection:{addItem:{type:"AddItemOutput",keyRaw:"addItem(input: $input)",fields:{item:{type:"TodoItem",keyRaw:"item",fields:{id:{type:"ID",keyRaw:"id"},completed:{type:"Boolean",keyRaw:"completed"},text:{type:"String",keyRaw:"text"}},operations:[{action:"insert",connection:"Filtered_Items",position:"first",when:{must_not:{completed:!0}}},{action:"insert",connection:"All_Items",position:"last"}]}}}}});var de=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:"ItemUpdate",kind:"HoudiniSubscription",hash:"81c95f0d292097fc59295113720a9272",raw:"subscription ItemUpdate($id: ID!) {\n  itemUpdate(id: $id) {\n    item {\n      id\n      completed\n      text\n    }\n  }\n}\n",rootType:"Subscription",selection:{itemUpdate:{type:"ItemUpdate",keyRaw:"itemUpdate(id: $id)",fields:{item:{type:"TodoItem",keyRaw:"item",fields:{id:{type:"ID",keyRaw:"id"},completed:{type:"Boolean",keyRaw:"completed"},text:{type:"String",keyRaw:"text"}}}}}}});var ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:"DeleteItem",kind:"HoudiniMutation",hash:"af0426e6e061efc22564e42bf13412db",raw:"mutation DeleteItem($id: ID!) {\n  deleteItem(item: $id) {\n    itemID\n  }\n}\n",rootType:"Mutation",selection:{deleteItem:{type:"DeleteIemOutput",keyRaw:"deleteItem(item: $id)",fields:{itemID:{type:"ID",keyRaw:"itemID",operations:[{action:"delete",type:"TodoItem"}]}}}}});var he=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:"UncompleteItem",kind:"HoudiniMutation",hash:"d3d08fdcd348934829a1f7c24bcdac5e",raw:"mutation UncompleteItem($id: ID!) {\n  uncheckItem(item: $id) {\n    item {\n      id\n      completed\n      ...Filtered_Items_remove\n    }\n  }\n}\n\nfragment Filtered_Items_remove on TodoItem {\n  id\n}\n",rootType:"Mutation",selection:{uncheckItem:{type:"UpdateItemOutput",keyRaw:"uncheckItem(item: $id)",fields:{item:{type:"TodoItem",keyRaw:"item",fields:{id:{type:"ID",keyRaw:"id"},completed:{type:"Boolean",keyRaw:"completed"}},operations:[{action:"remove",connection:"Filtered_Items",when:{must:{completed:!0}}}]}}}}});var me=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:"CompleteItem",kind:"HoudiniMutation",hash:"cce9318067ed9ac433f0fed6c7337634",raw:"mutation CompleteItem($id: ID!) {\n  checkItem(item: $id) {\n    item {\n      id\n      completed\n      ...Filtered_Items_remove\n    }\n  }\n}\n\nfragment Filtered_Items_remove on TodoItem {\n  id\n}\n",rootType:"Mutation",selection:{checkItem:{type:"UpdateItemOutput",keyRaw:"checkItem(item: $id)",fields:{item:{type:"TodoItem",keyRaw:"item",fields:{id:{type:"ID",keyRaw:"id"},completed:{type:"Boolean",keyRaw:"completed"}},operations:[{action:"remove",connection:"Filtered_Items",when:{must:{completed:!1}}}]}}}}});var fe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:"ItemEntry_item",kind:"HoudiniFragment",hash:"bb754a63ce6081f2ed825ec696d4f375",raw:"fragment ItemEntry_item on TodoItem {\n  id\n  text\n  completed\n}\n\nfragment Filtered_Items_insert on TodoItem {\n  id\n  completed\n  ...ItemEntry_item\n}\n\nfragment Filtered_Items_remove on TodoItem {\n  id\n}\n\nfragment All_Items_insert on TodoItem {\n  id\n  completed\n}\n\nfragment All_Items_remove on TodoItem {\n  id\n}\n\ndirective @TodoItem_delete repeatable on FIELD\n",rootType:"TodoItem",selection:{id:{type:"ID",keyRaw:"id"},text:{type:"String",keyRaw:"text"},completed:{type:"Boolean",keyRaw:"completed"}}});function pe(e){let t,i,n,s,r,o,c,a,l,d,u,h,E,O=e[0].text+"";return{c(){t=m("li"),i=m("div"),n=m("input"),o=f(),c=m("label"),a=p(O),d=f(),u=m("button"),this.h()},l(e){t=b(e,"LI",{});var s=y(t);i=b(s,"DIV",{class:!0});var r=y(i);n=b(r,"INPUT",{name:!0,class:!0,type:!0,checked:!0}),o=I(r),c=b(r,"LABEL",{for:!0});var l=y(c);a=k(l,O),l.forEach(w),d=I(r),u=b(r,"BUTTON",{class:!0}),y(u).forEach(w),r.forEach(w),s.forEach(w),this.h()},h(){g(n,"name",s=e[0].text),g(n,"class","toggle"),g(n,"type","checkbox"),n.checked=r=e[0].completed,g(c,"for",l=e[0].text),g(u,"class","destroy"),g(i,"class","view"),v(t,"completed",e[0].completed)},m(s,r){_(s,t,r),S(t,i),S(i,n),S(i,o),S(i,c),S(c,a),S(i,d),S(i,u),h||(E=[D(n,"click",e[3]),D(u,"click",e[5])],h=!0)},p(e,[i]){1&i&&s!==(s=e[0].text)&&g(n,"name",s),1&i&&r!==(r=e[0].completed)&&(n.checked=r),1&i&&O!==(O=e[0].text+"")&&R(a,O),1&i&&l!==(l=e[0].text)&&g(c,"for",l),1&i&&v(t,"completed",e[0].completed)},i:T,o:T,d(e){e&&w(t),h=!1,L(E)}}}function be(e,t,i){let n,{item:s}=t;const r=function(e,t){if("HoudiniFragment"!==e.artifact.kind)throw new Error("getFragment can only take fragment documents");let i;const n=Z();return J(t,(s=>{const r=Y.id(e.artifact.rootType,t);return i={rootType:e.artifact.rootType,selection:e.artifact.selection,set:s,parentID:r},a((()=>{r&&i&&Y.subscribe(i,n())})),()=>{r&&Y.unsubscribe({rootType:e.artifact.rootType,parentID:r,selection:e.artifact.selection,set:s},n())}}))}({kind:"HoudiniFragment",artifact:fe},s);E(e,r,(e=>i(0,n=e)));const o=oe({kind:"HoudiniMutation",artifact:me}),c=oe({kind:"HoudiniMutation",artifact:he}),d=oe({kind:"HoudiniMutation",artifact:ue});!function(e,t){if("HoudiniSubscription"!==e.kind)throw new Error("subscription() must be passed a subscription document");const i=K();if(!i)throw new Error("Could not find network environment");const{raw:n,selection:s}=e.artifact,r=z(null);let o;a((()=>{if(!i.socket)throw new Error("The current environment is not configured to handle subscriptions. Make sure you passed a client to its constructor.");o=i.socket.subscribe({query:n,variables:t},{next({data:e,errors:i}){if(i)throw i;e&&(Y.write(s,e,t),r.set(e))},error(e){},complete(){}})})),l((()=>{o&&o()})),r.subscribe}({kind:"HoudiniSubscription",artifact:de},{id:n.id});return e.$$set=e=>{"item"in e&&i(4,s=e.item)},[n,r,d,async function(){n.completed?await c({id:n.id}):await o({id:n.id})},s,()=>d({id:n.id})]}class ye extends d{constructor(e){super(),u(this,e,be,pe,h,{item:4})}}function Ie(e,t,i){const n=e.slice();return n[17]=t[i],n}function ke(e,t){let i,n,s;return n=new ye({props:{item:t[17]}}),{key:e,first:null,c(){i=O(),A(n.$$.fragment),this.h()},l(e){i=O(),$(n.$$.fragment,e),this.h()},h(){this.first=i},m(e,t){_(e,i,t),j(n,e,t),s=!0},p(e,i){t=e;const s={};2&i&&(s.item=t[17]),n.$set(s)},i(e){s||(x(n.$$.fragment,e),s=!0)},o(e){C(n.$$.fragment,e),s=!1},d(e){e&&w(i),M(n,e)}}}function we(e){let t,i,n,s,r,o,c,a,l,d,u,h,D,T,L,E,O,A,$,j=e[5]&&ge();return{c(){t=m("footer"),i=m("span"),n=m("strong"),s=p(e[3]),r=p(" item left"),o=f(),c=m("ul"),a=m("li"),l=m("a"),d=p("All"),u=f(),h=m("li"),D=m("a"),T=p("Active"),L=f(),E=m("li"),O=m("a"),A=p("Completed"),$=f(),j&&j.c(),this.h()},l(m){t=b(m,"FOOTER",{class:!0});var f=y(t);i=b(f,"SPAN",{class:!0});var p=y(i);n=b(p,"STRONG",{});var g=y(n);s=k(g,e[3]),g.forEach(w),r=k(p," item left"),p.forEach(w),o=I(f),c=b(f,"UL",{class:!0});var v=y(c);a=b(v,"LI",{});var _=y(a);l=b(_,"A",{class:!0,href:!0});var S=y(l);d=k(S,"All"),S.forEach(w),_.forEach(w),u=I(v),h=b(v,"LI",{});var R=y(h);D=b(R,"A",{href:!0});var x=y(D);T=k(x,"Active"),x.forEach(w),R.forEach(w),L=I(v),E=b(v,"LI",{});var C=y(E);O=b(C,"A",{href:!0});var M=y(O);A=k(M,"Completed"),M.forEach(w),C.forEach(w),v.forEach(w),$=I(f),j&&j.l(f),f.forEach(w),this.h()},h(){g(i,"class","todo-count"),g(l,"class","selected"),g(l,"href","/"),v(l,"selected","all"===e[4]),g(D,"href","/active"),v(D,"selected","active"===e[4]),g(O,"href","/completed"),v(O,"selected","completed"===e[4]),g(c,"class","filters"),g(t,"class","footer")},m(e,m){_(e,t,m),S(t,i),S(i,n),S(n,s),S(i,r),S(t,o),S(t,c),S(c,a),S(a,l),S(l,d),S(c,u),S(c,h),S(h,D),S(D,T),S(c,L),S(c,E),S(E,O),S(O,A),S(t,$),j&&j.m(t,null)},p(e,i){8&i&&R(s,e[3]),16&i&&v(l,"selected","all"===e[4]),16&i&&v(D,"selected","active"===e[4]),16&i&&v(O,"selected","completed"===e[4]),e[5]?j||(j=ge(),j.c(),j.m(t,null)):j&&(j.d(1),j=null)},d(e){e&&w(t),j&&j.d()}}}function ge(e){let t,i;return{c(){t=m("button"),i=p("Clear completed"),this.h()},l(e){t=b(e,"BUTTON",{class:!0});var n=y(t);i=k(n,"Clear completed"),n.forEach(w),this.h()},h(){g(t,"class","clear-completed")},m(e,n){_(e,t,n),S(t,i)},d(e){e&&w(t)}}}function ve(e){let t,i,n,s,r,o,c,a,l,d,u,h,v,R,T,E,A,$,j,M=[],B=new Map,K=e[1].filteredItems;const P=e=>e[17].id;for(let m=0;m<K.length;m+=1){let t=Ie(e,K,m),i=P(t);B.set(i,M[m]=ke(i,t))}let z=e[2]>0&&we(e);return{c(){t=m("header"),i=m("a"),n=m("h1"),s=p("todos"),r=f(),o=m("input"),c=f(),a=m("section"),l=m("input"),d=f(),u=m("label"),h=p("Mark all as complete"),v=f(),R=m("ul");for(let e=0;e<M.length;e+=1)M[e].c();T=f(),z&&z.c(),E=O(),this.h()},l(e){t=b(e,"HEADER",{class:!0});var m=y(t);i=b(m,"A",{href:!0});var f=y(i);n=b(f,"H1",{});var p=y(n);s=k(p,"todos"),p.forEach(w),f.forEach(w),r=I(m),o=b(m,"INPUT",{class:!0,placeholder:!0}),m.forEach(w),c=I(e),a=b(e,"SECTION",{class:!0});var g=y(a);l=b(g,"INPUT",{id:!0,class:!0,type:!0}),d=I(g),u=b(g,"LABEL",{for:!0});var _=y(u);h=k(_,"Mark all as complete"),_.forEach(w),v=I(g),R=b(g,"UL",{class:!0});var S=y(R);for(let t=0;t<M.length;t+=1)M[t].l(S);S.forEach(w),g.forEach(w),T=I(e),z&&z.l(e),E=O(),this.h()},h(){g(i,"href","/"),g(o,"class","new-todo"),g(o,"placeholder","What needs to be done?"),g(t,"class","header"),g(l,"id","toggle-all"),g(l,"class","toggle-all"),g(l,"type","checkbox"),g(u,"for","toggle-all"),g(R,"class","todo-list"),g(a,"class","main")},m(m,f){_(m,t,f),S(t,i),S(i,n),S(n,s),S(t,r),S(t,o),F(o,e[0]),_(m,c,f),_(m,a,f),S(a,l),S(a,d),S(a,u),S(u,h),S(a,v),S(a,R);for(let e=0;e<M.length;e+=1)M[e].m(R,null);_(m,T,f),z&&z.m(m,f),_(m,E,f),A=!0,$||(j=[D(o,"input",e[14]),D(o,"blur",e[11])],$=!0)},p(e,[t]){1&t&&o.value!==e[0]&&F(o,e[0]),2&t&&(K=e[1].filteredItems,N(),M=V(M,t,P,1,e,K,B,R,U,ke,null,Ie),H()),e[2]>0?z?z.p(e,t):(z=we(e),z.c(),z.m(E.parentNode,E)):z&&(z.d(1),z=null)},i(e){if(!A){for(let e=0;e<K.length;e+=1)x(M[e]);A=!0}},o(e){for(let t=0;t<M.length;t+=1)C(M[t]);A=!1},d(e){e&&w(t),e&&w(c),e&&w(a);for(let t=0;t<M.length;t+=1)M[t].d();e&&w(T),z&&z.d(e),e&&w(E),$=!1,L(j)}}}function _e({page:e}){if(!e.params.filter||e.params.filter,["active","completed","all"].includes(e.params.filter))return{completed:"completed"===e.params.filter};this.error(400,"filter must be one of 'active' or 'completed'")}async function Se(e){const t=new P(e),i=t.computeInput("kit",_e);if(!t.continue)return t.returnValue;const n=await B(t,{text:ce,variables:i},e.session);return n.errors?(t.graphqlErrors(n.errors),t.returnValue):{props:{_AllItems:n,_AllItems_Input:i}}}function De(e,t,i){let n,s,r,o,c,{_AllItems:a}=t,{_AllItems_Input:l}=t,d=ee({initialValue:a,variables:l,kind:"HoudiniQuery",artifact:ae});const{data:u}=d;E(e,u,(e=>i(1,n=e)));const h=oe({kind:"HoudiniMutation",artifact:le}),m=q(u,(e=>e.allItems.length));E(e,m,(e=>i(2,s=e)));const f=q(u,(e=>e.allItems.filter((e=>!e.completed)).length));E(e,f,(e=>i(3,r=e)));const p=q(u,(e=>Boolean(e.allItems.find((e=>e.completed)))));E(e,p,(e=>i(5,c=e)));const b=q(ne,(e=>e.path.includes("active")?"active":e.path.includes("completed")?"completed":"all"));E(e,b,(e=>i(4,o=e)));let y="";return e.$$set=e=>{"_AllItems"in e&&i(12,a=e._AllItems),"_AllItems_Input"in e&&i(13,l=e._AllItems_Input)},e.$$.update=()=>{12288&e.$$.dirty&&d.writeData(a,l)},[y,n,s,r,o,c,u,m,f,p,b,async function(){await h({input:{text:y}}),i(0,y="")},a,l,function(){y=this.value,i(0,y)}]}export default class extends d{constructor(e){super(),u(this,e,De,ve,h,{_AllItems:12,_AllItems_Input:13})}}export{_e as AllItemsVariables,Se as load};
