import{S as e,i as t,s as n,G as i,e as r,k as o,t as s,H as a,c,d as u,n as l,a as f,g as p,b as h,I as d,f as v,J as m,v as y,r as T}from"../chunks/index-d2ff60c6.js";import{E,s as b}from"../chunks/network-de0a377e.js";var I="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function O(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})})),t}function _(e){var t={exports:{}};return e(t,t.exports),t.exports}var g=N;function N(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}N.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},N.prototype.reset=function(){this.attempts=0},N.prototype.setMin=function(e){this.ms=e},N.prototype.setMax=function(e){this.max=e},N.prototype.setJitter=function(e){this.jitter=e};var S=_((function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,o||e,s),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},a.prototype.emit=function(e,t,i,r,o,s){var a=n?n+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,r),!0;case 5:return l.fn.call(l.context,t,i,r,o),!0;case 6:return l.fn.call(l.context,t,i,r,o,s),!0}for(u=1,c=new Array(f-1);u<f;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,h=l.length;for(u=0;u<h;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),f){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,i);break;case 4:l[u].fn.call(l[u].context,t,i,r);break;default:if(!c)for(p=1,c=new Array(f-1);p<f;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,i,r){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||i&&a.context!==i||s(this,o);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||r&&!a[c].once||i&&a[c].context!==i)&&u.push(a[c]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a}));var C=function(e){return"string"==typeof e},w=Object.defineProperty({default:C},"__esModule",{value:!0});var A=function(e){return null!==e&&"object"==typeof e},x=Object.defineProperty({default:A},"__esModule",{value:!0}),D="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e){return P(e,[])}function P(e,t){switch(M(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n=[].concat(t,[e]),i=function(e){var t=e[String(D)];if("function"==typeof t)return t;if("function"==typeof e.inspect)return e.inspect}(e);if(void 0!==i){var r=i.call(e);if(r!==e)return"string"==typeof r?r:P(r,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),i=e.length-n,r=[],o=0;o<n;++o)r.push(P(e[o],t));1===i?r.push("... 1 more item"):i>1&&r.push("... ".concat(i," more items"));return"["+r.join(", ")+"]"}(e,n);return function(e,t){var n=Object.keys(e);if(0===n.length)return"{}";if(t.length>2)return"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]";return"{ "+n.map((function(n){return n+": "+P(e[n],t)})).join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}function R(e){var t=e.prototype.toJSON;"function"==typeof t||function(e,t){if(!Boolean(e))throw new Error(null!=t?t:"Unexpected invariant triggered.")}(0),e.prototype.inspect=t,D&&(e.prototype[D]=t)}function L(e){return null!=e&&"string"==typeof e.kind}R(function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}()),R(function(){function e(e,t,n,i,r,o,s){this.kind=e,this.start=t,this.end=n,this.line=i,this.column=r,this.value=s,this.prev=o,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}());var j={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},V=Object.freeze({});function F(e,t,n){var i=e[t];if(i){if(!n&&"function"==typeof i)return i;var r=n?i.leave:i.enter;if("function"==typeof r)return r}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var s=o[t];if("function"==typeof s)return s}}}var U={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return Q(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,i=J("(",Q(e.variableDefinitions,", "),")"),r=Q(e.directives," "),o=e.selectionSet;return n||r||i||"query"!==t?Q([t,Q([n,i]),r,o]," "):o},VariableDefinition:function(e){var t=e.variable,n=e.type,i=e.defaultValue,r=e.directives;return t+": "+n+J(" = ",i)+J(" ",Q(r," "))},SelectionSet:function(e){return B(e.selections)},Field:function(e){var t=e.alias,n=e.name,i=e.arguments,r=e.directives,o=e.selectionSet,s=J("",t,": ")+n,a=s+J("(",Q(i,", "),")");return a.length>80&&(a=s+J("(\n",Y(Q(i,"\n")),"\n)")),Q([a,Q(r," "),o]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+J(" ",Q(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,i=e.selectionSet;return Q(["...",J("on ",t),Q(n," "),i]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,i=e.variableDefinitions,r=e.directives,o=e.selectionSet;return"fragment ".concat(t).concat(J("(",Q(i,", "),")")," ")+"on ".concat(n," ").concat(J("",Q(r," ")," "))+o},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=-1===e.indexOf("\n"),r=" "===e[0]||"\t"===e[0],o='"'===e[e.length-1],s="\\"===e[e.length-1],a=!i||o||s||n,c="";return!a||i&&r||(c+="\n"+t),c+=t?e.replace(/\n/g,"\n"+t):e,a&&(c+="\n"),'"""'+c.replace(/"""/g,'\\"""')+'"""'}(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+Q(e.values,", ")+"]"},ObjectValue:function(e){return"{"+Q(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+J("(",Q(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:G((function(e){var t=e.directives,n=e.operationTypes;return Q(["schema",Q(t," "),B(n)]," ")})),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:G((function(e){return Q(["scalar",e.name,Q(e.directives," ")]," ")})),ObjectTypeDefinition:G((function(e){var t=e.name,n=e.interfaces,i=e.directives,r=e.fields;return Q(["type",t,J("implements ",Q(n," & ")),Q(i," "),B(r)]," ")})),FieldDefinition:G((function(e){var t=e.name,n=e.arguments,i=e.type,r=e.directives;return t+(W(n)?J("(\n",Y(Q(n,"\n")),"\n)"):J("(",Q(n,", "),")"))+": "+i+J(" ",Q(r," "))})),InputValueDefinition:G((function(e){var t=e.name,n=e.type,i=e.defaultValue,r=e.directives;return Q([t+": "+n,J("= ",i),Q(r," ")]," ")})),InterfaceTypeDefinition:G((function(e){var t=e.name,n=e.interfaces,i=e.directives,r=e.fields;return Q(["interface",t,J("implements ",Q(n," & ")),Q(i," "),B(r)]," ")})),UnionTypeDefinition:G((function(e){var t=e.name,n=e.directives,i=e.types;return Q(["union",t,Q(n," "),i&&0!==i.length?"= "+Q(i," | "):""]," ")})),EnumTypeDefinition:G((function(e){var t=e.name,n=e.directives,i=e.values;return Q(["enum",t,Q(n," "),B(i)]," ")})),EnumValueDefinition:G((function(e){return Q([e.name,Q(e.directives," ")]," ")})),InputObjectTypeDefinition:G((function(e){var t=e.name,n=e.directives,i=e.fields;return Q(["input",t,Q(n," "),B(i)]," ")})),DirectiveDefinition:G((function(e){var t=e.name,n=e.arguments,i=e.repeatable,r=e.locations;return"directive @"+t+(W(n)?J("(\n",Y(Q(n,"\n")),"\n)"):J("(",Q(n,", "),")"))+(i?" repeatable":"")+" on "+Q(r," | ")})),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return Q(["extend schema",Q(t," "),B(n)]," ")},ScalarTypeExtension:function(e){return Q(["extend scalar",e.name,Q(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,i=e.directives,r=e.fields;return Q(["extend type",t,J("implements ",Q(n," & ")),Q(i," "),B(r)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,i=e.directives,r=e.fields;return Q(["extend interface",t,J("implements ",Q(n," & ")),Q(i," "),B(r)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,i=e.types;return Q(["extend union",t,Q(n," "),i&&0!==i.length?"= "+Q(i," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,i=e.values;return Q(["extend enum",t,Q(n," "),B(i)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,i=e.fields;return Q(["extend input",t,Q(n," "),B(i)]," ")}};function G(e){return function(t){return Q([t.description,e(t)],"\n")}}function Q(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter((function(e){return e})).join(n))&&void 0!==t?t:""}function B(e){return J("{\n",Y(Q(e,"\n")),"\n}")}function J(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=t&&""!==t?e+t+n:""}function Y(e){return J("  ",e.replace(/\n/g,"\n  "))}function q(e){return-1!==e.indexOf("\n")}function W(e){return null!=e&&e.some(q)}var z=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",print:function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j,i=void 0,r=Array.isArray(e),o=[e],s=-1,a=[],c=void 0,u=void 0,l=void 0,f=[],p=[],h=e;do{var d=++s===o.length,v=d&&0!==a.length;if(d){if(u=0===p.length?void 0:f[f.length-1],c=l,l=p.pop(),v){if(r)c=c.slice();else{for(var m={},y=0,T=Object.keys(c);y<T.length;y++){var E=T[y];m[E]=c[E]}c=m}for(var b=0,I=0;I<a.length;I++){var O=a[I][0],_=a[I][1];r&&(O-=b),r&&null===_?(c.splice(O,1),b++):c[O]=_}}s=i.index,o=i.keys,a=i.edits,r=i.inArray,i=i.prev}else{if(u=l?r?s:o[s]:void 0,null==(c=l?l[u]:h))continue;l&&f.push(u)}var g,N=void 0;if(!Array.isArray(c)){if(!L(c))throw new Error("Invalid AST Node: ".concat(k(c),"."));var S=F(t,c.kind,d);if(S){if((N=S.call(t,c,u,l,f,p))===V)break;if(!1===N){if(!d){f.pop();continue}}else if(void 0!==N&&(a.push([u,N]),!d)){if(!L(N)){f.pop();continue}c=N}}}void 0===N&&v&&a.push([u,c]),d?f.pop():(i={inArray:r,index:s,keys:o,edits:a,prev:i},o=(r=Array.isArray(c))?c:null!==(g=n[c.kind])&&void 0!==g?g:[],s=-1,a=[],l&&p.push(l),l=c)}while(void 0!==i);return 0!==a.length&&(h=a[a.length-1][1]),h}(e,{leave:U})}}),$=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"});var K,H=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getOperationAST:function(e,t){for(var n=null,i=0,r=e.definitions;i<r.length;i++){var o,s=r[i];if(s.kind===$.OPERATION_DEFINITION)if(null==t){if(n)return null;n=s}else if((null===(o=s.name)||void 0===o?void 0:o.value)===t)return s}return n}});K="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")();var X,Z,ee=("function"==typeof(Z=K.Symbol)?Z.observable?X=Z.observable:(X=Z("observable"),Z.observable=X):X="@@observable",X),te=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ee}),ne=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.GRAPHQL_SUBSCRIPTIONS=t.GRAPHQL_WS=void 0;t.GRAPHQL_WS="graphql-ws";t.GRAPHQL_SUBSCRIPTIONS="graphql-subscriptions"})),ie=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.WS_TIMEOUT=t.MIN_WS_TIMEOUT=void 0;t.MIN_WS_TIMEOUT=1e3;t.WS_TIMEOUT=3e4})),re=function(){function e(){throw new Error("Static Class")}return e.GQL_CONNECTION_INIT="connection_init",e.GQL_CONNECTION_ACK="connection_ack",e.GQL_CONNECTION_ERROR="connection_error",e.GQL_CONNECTION_KEEP_ALIVE="ka",e.GQL_CONNECTION_TERMINATE="connection_terminate",e.GQL_START="start",e.GQL_DATA="data",e.GQL_ERROR="error",e.GQL_COMPLETE="complete",e.GQL_STOP="stop",e.SUBSCRIPTION_START="subscription_start",e.SUBSCRIPTION_DATA="subscription_data",e.SUBSCRIPTION_SUCCESS="subscription_success",e.SUBSCRIPTION_FAIL="subscription_fail",e.SUBSCRIPTION_END="subscription_end",e.INIT="init",e.INIT_SUCCESS="init_success",e.INIT_FAIL="init_fail",e.KEEP_ALIVE="keepalive",e}(),oe=Object.defineProperty({default:re},"__esModule",{value:!0}),se=O(z),ae=O(H),ce=O(te),ue=_((function(e,t){var n=I&&I.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i=I&&I.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=I&&I.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=I&&I.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionClient=void 0;var s=void 0!==I?I:"undefined"!=typeof window?window:{},a=s.WebSocket||s.MozWebSocket,c=function(){function e(e,t,n,i){var r=t||{},o=r.connectionCallback,s=void 0===o?void 0:o,c=r.connectionParams,u=void 0===c?{}:c,l=r.minTimeout,f=void 0===l?ie.MIN_WS_TIMEOUT:l,p=r.timeout,h=void 0===p?ie.WS_TIMEOUT:p,d=r.reconnect,v=void 0!==d&&d,m=r.reconnectionAttempts,y=void 0===m?1/0:m,T=r.lazy,E=void 0!==T&&T,b=r.inactivityTimeout,I=void 0===b?0:b,O=r.wsOptionArguments,_=void 0===O?[]:O;if(this.wsImpl=n||a,!this.wsImpl)throw new Error("Unable to find native implementation, or alternative implementation for WebSocket!");this.wsProtocols=i||ne.GRAPHQL_WS,this.connectionCallback=s,this.url=e,this.operations={},this.nextOperationId=0,this.minWsTimeout=f,this.wsTimeout=h,this.unsentMessagesQueue=[],this.reconnect=v,this.reconnecting=!1,this.reconnectionAttempts=y,this.lazy=!!E,this.inactivityTimeout=I,this.closedByUser=!1,this.backoff=new g({jitter:.5}),this.eventEmitter=new S.EventEmitter,this.middlewares=[],this.client=null,this.maxConnectTimeGenerator=this.createMaxConnectTimeGenerator(),this.connectionParams=this.getConnectionParams(u),this.wsOptionArguments=_,this.lazy||this.connect()}return Object.defineProperty(e.prototype,"status",{get:function(){return null===this.client?this.wsImpl.CLOSED:this.client.readyState},enumerable:!1,configurable:!0}),e.prototype.close=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.clearInactivityTimeout(),null!==this.client&&(this.closedByUser=t,e&&(this.clearCheckConnectionInterval(),this.clearMaxConnectTimeout(),this.clearTryReconnectTimeout(),this.unsubscribeAll(),this.sendMessage(void 0,oe.default.GQL_CONNECTION_TERMINATE,null)),this.client.close(),this.client.onopen=null,this.client.onclose=null,this.client.onerror=null,this.client.onmessage=null,this.client=null,this.eventEmitter.emit("disconnected"),e||this.tryReconnect())},e.prototype.request=function(e){var t,n,i=this.getObserver.bind(this),r=this.executeOperation.bind(this),o=this.unsubscribe.bind(this);return this.clearInactivityTimeout(),(t={})[ce.default]=function(){return this},t.subscribe=function(t,s,a){var c=i(t,s,a);return n=r(e,(function(e,t){null===e&&null===t?c.complete&&c.complete():e?c.error&&c.error(e[0]):c.next&&c.next(t)})),{unsubscribe:function(){n&&(o(n),n=null)}}},t},e.prototype.on=function(e,t,n){var i=this.eventEmitter.on(e,t,n);return function(){i.off(e,t,n)}},e.prototype.onConnected=function(e,t){return this.on("connected",e,t)},e.prototype.onConnecting=function(e,t){return this.on("connecting",e,t)},e.prototype.onDisconnected=function(e,t){return this.on("disconnected",e,t)},e.prototype.onReconnected=function(e,t){return this.on("reconnected",e,t)},e.prototype.onReconnecting=function(e,t){return this.on("reconnecting",e,t)},e.prototype.onError=function(e,t){return this.on("error",e,t)},e.prototype.unsubscribeAll=function(){var e=this;Object.keys(this.operations).forEach((function(t){e.unsubscribe(t)}))},e.prototype.applyMiddlewares=function(e){var t=this;return new Promise((function(n,i){var r,s,a;r=o(t.middlewares),s=t,(a=function(t){if(t)i(t);else if(r.length>0){var o=r.shift();o&&o.applyMiddleware.apply(s,[e,a])}else n(e)})()}))},e.prototype.use=function(e){var t=this;return e.map((function(e){if("function"!=typeof e.applyMiddleware)throw new Error("Middleware must implement the applyMiddleware function.");t.middlewares.push(e)})),this},e.prototype.getConnectionParams=function(e){return function(){return new Promise((function(t,n){if("function"==typeof e)try{return t(e.call(null))}catch(i){return n(i)}t(e)}))}},e.prototype.executeOperation=function(e,t){var n=this;null===this.client&&this.connect();var i=this.generateOperationId();return this.operations[i]={options:e,handler:t},this.applyMiddlewares(e).then((function(e){n.checkOperationOptions(e,t),n.operations[i]&&(n.operations[i]={options:e,handler:t},n.sendMessage(i,oe.default.GQL_START,e))})).catch((function(e){n.unsubscribe(i),t(n.formatErrors(e))})),i},e.prototype.getObserver=function(e,t,n){return"function"==typeof e?{next:function(t){return e(t)},error:function(e){return t&&t(e)},complete:function(){return n&&n()}}:e},e.prototype.createMaxConnectTimeGenerator=function(){var e=this.minWsTimeout,t=this.wsTimeout;return new g({min:e,max:t,factor:1.2})},e.prototype.clearCheckConnectionInterval=function(){this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnectionIntervalId=null)},e.prototype.clearMaxConnectTimeout=function(){this.maxConnectTimeoutId&&(clearTimeout(this.maxConnectTimeoutId),this.maxConnectTimeoutId=null)},e.prototype.clearTryReconnectTimeout=function(){this.tryReconnectTimeoutId&&(clearTimeout(this.tryReconnectTimeoutId),this.tryReconnectTimeoutId=null)},e.prototype.clearInactivityTimeout=function(){this.inactivityTimeoutId&&(clearTimeout(this.inactivityTimeoutId),this.inactivityTimeoutId=null)},e.prototype.setInactivityTimeout=function(){var e=this;this.inactivityTimeout>0&&0===Object.keys(this.operations).length&&(this.inactivityTimeoutId=setTimeout((function(){0===Object.keys(e.operations).length&&e.close()}),this.inactivityTimeout))},e.prototype.checkOperationOptions=function(e,t){var n=e.query,i=e.variables,r=e.operationName;if(!n)throw new Error("Must provide a query.");if(!t)throw new Error("Must provide an handler.");if(!w.default(n)&&!ae.getOperationAST(n,r)||r&&!w.default(r)||i&&!x.default(i))throw new Error("Incorrect option types. query must be a string or a document,`operationName` must be a string, and `variables` must be an object.")},e.prototype.buildMessage=function(e,t,i){return{id:e,type:t,payload:i&&i.query?n(n({},i),{query:"string"==typeof i.query?i.query:se.print(i.query)}):i}},e.prototype.formatErrors=function(e){return Array.isArray(e)?e:e&&e.errors?this.formatErrors(e.errors):e&&e.message?[e]:[{name:"FormatedError",message:"Unknown error",originalError:e}]},e.prototype.sendMessage=function(e,t,n){this.sendMessageRaw(this.buildMessage(e,t,n))},e.prototype.sendMessageRaw=function(e){switch(this.status){case this.wsImpl.OPEN:var t=JSON.stringify(e);try{JSON.parse(t)}catch(n){this.eventEmitter.emit("error",new Error("Message must be JSON-serializable. Got: "+e))}this.client.send(t);break;case this.wsImpl.CONNECTING:this.unsentMessagesQueue.push(e);break;default:this.reconnecting||this.eventEmitter.emit("error",new Error("A message was not sent because socket is not connected, is closing or is already closed. Message was: "+JSON.stringify(e)))}},e.prototype.generateOperationId=function(){return String(++this.nextOperationId)},e.prototype.tryReconnect=function(){var e=this;if(this.reconnect&&!(this.backoff.attempts>=this.reconnectionAttempts)){this.reconnecting||(Object.keys(this.operations).forEach((function(t){e.unsentMessagesQueue.push(e.buildMessage(t,oe.default.GQL_START,e.operations[t].options))})),this.reconnecting=!0),this.clearTryReconnectTimeout();var t=this.backoff.duration();this.tryReconnectTimeoutId=setTimeout((function(){e.connect()}),t)}},e.prototype.flushUnsentMessagesQueue=function(){var e=this;this.unsentMessagesQueue.forEach((function(t){e.sendMessageRaw(t)})),this.unsentMessagesQueue=[]},e.prototype.checkConnection=function(){this.wasKeepAliveReceived?this.wasKeepAliveReceived=!1:this.reconnecting||this.close(!1,!0)},e.prototype.checkMaxConnectTimeout=function(){var e=this;this.clearMaxConnectTimeout(),this.maxConnectTimeoutId=setTimeout((function(){e.status!==e.wsImpl.OPEN&&(e.reconnecting=!0,e.close(!1,!0))}),this.maxConnectTimeGenerator.duration())},e.prototype.connect=function(){var e,t=this;this.client=new((e=this.wsImpl).bind.apply(e,o([void 0,this.url,this.wsProtocols],this.wsOptionArguments))),this.checkMaxConnectTimeout(),this.client.onopen=function(){return i(t,void 0,void 0,(function(){var e,t;return r(this,(function(n){switch(n.label){case 0:if(this.status!==this.wsImpl.OPEN)return[3,4];this.clearMaxConnectTimeout(),this.closedByUser=!1,this.eventEmitter.emit(this.reconnecting?"reconnecting":"connecting"),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.connectionParams()];case 2:return e=n.sent(),this.sendMessage(void 0,oe.default.GQL_CONNECTION_INIT,e),this.flushUnsentMessagesQueue(),[3,4];case 3:return t=n.sent(),this.sendMessage(void 0,oe.default.GQL_CONNECTION_ERROR,t),this.flushUnsentMessagesQueue(),[3,4];case 4:return[2]}}))}))},this.client.onclose=function(){t.closedByUser||t.close(!1,!1)},this.client.onerror=function(e){t.eventEmitter.emit("error",e)},this.client.onmessage=function(e){var n=e.data;t.processReceivedData(n)}},e.prototype.processReceivedData=function(e){var t,i;try{i=(t=JSON.parse(e)).id}catch(a){throw new Error("Message must be JSON-parseable. Got: "+e)}if(-1===[oe.default.GQL_DATA,oe.default.GQL_COMPLETE,oe.default.GQL_ERROR].indexOf(t.type)||this.operations[i])switch(t.type){case oe.default.GQL_CONNECTION_ERROR:this.connectionCallback&&this.connectionCallback(t.payload);break;case oe.default.GQL_CONNECTION_ACK:this.eventEmitter.emit(this.reconnecting?"reconnected":"connected",t.payload),this.reconnecting=!1,this.backoff.reset(),this.maxConnectTimeGenerator.reset(),this.connectionCallback&&this.connectionCallback();break;case oe.default.GQL_COMPLETE:var r=this.operations[i].handler;delete this.operations[i],r.call(this,null,null);break;case oe.default.GQL_ERROR:this.operations[i].handler(this.formatErrors(t.payload),null),delete this.operations[i];break;case oe.default.GQL_DATA:var o=t.payload.errors?n(n({},t.payload),{errors:this.formatErrors(t.payload.errors)}):t.payload;this.operations[i].handler(null,o);break;case oe.default.GQL_CONNECTION_KEEP_ALIVE:var s=void 0===this.wasKeepAliveReceived;this.wasKeepAliveReceived=!0,s&&this.checkConnection(),this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnection()),this.checkConnectionIntervalId=setInterval(this.checkConnection.bind(this),this.wsTimeout);break;default:throw new Error("Invalid message type!")}else this.unsubscribe(i)},e.prototype.unsubscribe=function(e){this.operations[e]&&(delete this.operations[e],this.setInactivityTimeout(),this.sendMessage(e,oe.default.GQL_STOP,void 0))},e}();t.SubscriptionClient=c}));const le="localhost:4000/graphql";let fe=null;if(process.browser){const e=new ue.SubscriptionClient("ws://"+le,{reconnect:!0});fe={subscribe(t,n){const{unsubscribe:i}=e.request(t).subscribe(n);return i}}}var pe=new E((async function({text:e,variables:t={}}){const n=await this.fetch("http://"+le,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,variables:t})});return await n.json()}),fe);function he(e){let t,n,E,b,I,O,_,g,N,S,C,w,A,x,D,M,k,P,R;const L=e[1].default,j=i(L,e,e[0],null);return{c(){t=r("link"),n=r("link"),E=o(),b=r("section"),j&&j.c(),I=o(),O=r("footer"),_=r("p"),g=s("Double-click to edit a todo"),N=o(),S=r("p"),C=s("Created by "),w=r("a"),A=s("Alec Aivazis"),x=o(),D=r("p"),M=s("Part of "),k=r("a"),P=s("TodoMVC"),this.h()},l(e){const i=a('[data-svelte="svelte-10d177f"]',document.head);t=c(i,"LINK",{rel:!0,href:!0}),n=c(i,"LINK",{rel:!0,href:!0}),i.forEach(u),E=l(e),b=c(e,"SECTION",{class:!0});var r=f(b);j&&j.l(r),r.forEach(u),I=l(e),O=c(e,"FOOTER",{class:!0});var o=f(O);_=c(o,"P",{});var s=f(_);g=p(s,"Double-click to edit a todo"),s.forEach(u),N=l(o),S=c(o,"P",{});var h=f(S);C=p(h,"Created by "),w=c(h,"A",{href:!0});var d=f(w);A=p(d,"Alec Aivazis"),d.forEach(u),h.forEach(u),x=l(o),D=c(o,"P",{});var v=f(D);M=p(v,"Part of "),k=c(v,"A",{href:!0});var m=f(k);P=p(m,"TodoMVC"),m.forEach(u),v.forEach(u),o.forEach(u),this.h()},h(){document.title="Houdini • TodoMVC",h(t,"rel","stylesheet"),h(t,"href","//unpkg.com/todomvc-common/base.css"),h(n,"rel","stylesheet"),h(n,"href","//unpkg.com/todomvc-app-css/index.css"),h(b,"class","todoapp"),h(w,"href","http://todomvc.com"),h(k,"href","http://todomvc.com"),h(O,"class","info")},m(e,i){d(document.head,t),d(document.head,n),v(e,E,i),v(e,b,i),j&&j.m(b,null),v(e,I,i),v(e,O,i),d(O,_),d(_,g),d(O,N),d(O,S),d(S,C),d(S,w),d(w,A),d(O,x),d(O,D),d(D,M),d(D,k),d(k,P),R=!0},p(e,[t]){j&&j.p&&1&t&&m(j,L,e,e[0],t,null,null)},i(e){R||(y(j,e),R=!0)},o(e){T(j,e),R=!1},d(e){u(t),u(n),e&&u(E),e&&u(b),j&&j.d(e),e&&u(I),e&&u(O)}}}function de(e,t,n){let{$$slots:i={},$$scope:r}=t;return b(pe),e.$$set=e=>{"$$scope"in e&&n(0,r=e.$$scope)},[r,i]}export default class extends e{constructor(e){super(),t(this,e,de,he,n,{})}}
